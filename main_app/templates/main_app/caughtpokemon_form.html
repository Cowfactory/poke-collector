<!-- main_app/caughtpokemon_form.html -->
{% extends 'base.html' %}
{% block content %}
    <form action="" method="post">
        {% csrf_token %}
        <table>
            {{ form.as_table }}
        </table>
        <input type="submit" value="Submit!">
    </form>
    <script>
        // Manually remove the "select-options" from the dropdown in the "select-dropdown"
        window.setTimeout(evil => {
            let wrapper_nodeList = document.querySelectorAll(".select-wrapper"); //All the dropdowns
            let usr = document.querySelector('[selected]').textContent; //The user we want to keep in the list
            
            let trainer = wrapper_nodeList.item(0).childNodes.item(3)
            let pokedex = wrapper_nodeList.item(1).childNodes.item(3)
            
            let theTrainer;
            for(item of trainer) {
                if(item.hasAttribute('selected')) 
                    theTrainer = item;
            }
            while(trainer.hasChildNodes()) {
                trainer.removeChild(trainer.lastChild)
            }
            trainer.appendChild(theTrainer);

            let thePokemon;
            for(item of pokedex) {
                if(item.hasAttribute('selected'))
                    thePokemon = item;
            }
            while(pokedex.hasChildNodes()) {
                pokedex.removeChild(pokedex.lastChild)
            }
            pokedex.appendChild(thePokemon);

        }, 0);
    </script>
{% endblock %}
